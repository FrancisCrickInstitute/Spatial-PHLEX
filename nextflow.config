/*
 * -------------------------------------------------
 *  Spatial-PHLEX Nextflow config file
 * -------------------------------------------------
 * Default config options for all environments.
 */

system_root = baseDir.subpath(0,1)
params {

    /*
    COHORT PARAMETERS
    */
    release = "release" //'2022_02_11_release'
    singularity_bind_path = "/$system_root"
    tracedir = "${params.outdir}/Spatial-PHLEX/Spatial-PHLEX/${params.release}/pipeline_info"
    

    /*
    * SPATIAL CLUSTERING CONFIG PARAMETERS
    */

    sampleFile = './data/sample_data.tracerx.txt'
    sampleFile_delimiter = '\t'
    objects = "./data/objects.txt" 
    phenotyping_column = 'cellType' //'majorType,cellType'
    objects_delimiter = '\t'

    /*
    * GRAPH ANALYSIS CONFIG PARAMETERS
    */

    graph_type = 'nearest_neighbour' // 'nearest_neighbour' //
    neighborhood_input = false
    neighbourhood_module_no = 865
    barrier_source_cell_type = 'CD8 T cells'
    barrier_target_cell_type = 'Epithelial cells'
    barrier_cell_type = 'Myofibroblasts'
    n_neighbours = 10


    /*
    * Pipeline execution parameters:
    */

    overwrite = true
    dev = false
    number_of_inputs = 2
    outdir = '../../results'
    publish_dir_mode = 'copy'
    workflow_name = 'default'
}

// Load base.config by default for all pipelines
includeConfig 'conf/base.config'

timeline {
  enabled = true
  file = "${params.tracedir}/execution_timeline.html"
}
report {
  enabled = true
  file = "${params.tracedir}/execution_report.html"
}
trace {
  enabled = true
  file = "${params.tracedir}/execution_trace.txt"
}
dag {
  enabled = true
  file = "${params.tracedir}/pipeline_dag.svg"
}